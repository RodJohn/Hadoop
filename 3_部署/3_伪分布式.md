
# 目的

    Hadoop伪分布式在单台centos上

# 环境

    centos7.5
    Hadoop2.6.5

# java

    安装jdk
    配置环境变量
    
# ssh
    
    生成秘钥
        ssh-keygen -t dsa -P '' -f ~/.ssh/id_dsa
    把公钥写到自己的认证秘钥    
        cat ~/.ssh/id_dsa.pub >> ~/.ssh/authorized_keys    

# hadoop

## 获取

下载

    wget https://mirrors.tuna.tsinghua.edu.cn/apache/hadoop/common/hadoop-2.6.5/hadoop-2.6.5.tar.gz
     
解压

    tar xzvf hadoop-2.6.5.tar.gz -C /opt/


## 配置 

配置HADOOP_HOME

    export HADOOP_HOME=/opt/hadoop-2.6.5
    export PATH=$PATH:$HADOOP_HOME/bin

配置JAVA_HOME  

    将以下文件中的JAVA_HOME设置为真实安装路径
    Hadoop-env.sh、mapred-env.sh、yarn-env.sh


配置core-site.xml

    设置NameNode和临时文件地址
    
    <property>
        <name>fs.defaultFS</name>
        <value>hdfs://localhost:9000</value>
    </property>
    <property>
        <name>hadoop.tmp.dir</name>
        <value>/var/hadoop-2.6.5/pseudo</value>
    </property>
    


配置hdfs-site.xml

    设置分片数量和secondary
              
    <property>
        <name>dfs.replication</name>
        <value>1</value>
    </property>
    <property>
        <name>dfs.namenode.secondary.http-address</name>
        <value>localhost:50090</value>
    </property>
  
# 初始化Hadoop
    
命令

    hdfs namenode -format
    
效果

    Storage directory /var/hadoop-2.6.5/pseudo/dfs/name has been successfully formatted
        
    去观察hadoop.tmp.dir设置的目录变化

问题

    如果初始化失败
    要格式化hadoop.tmp.dir设置的目录
    
# 启动

命令

    /opt/hadoop-2.6.5/sbin/start-all.sh
    
效果

    Starting namenodes on [localhost]
    localhost: starting namenode, logging to /opt/hadoop-2.6.5/logs/hadoop-root-namenode-msi.out
    localhost: starting datanode, logging to /opt/hadoop-2.6.5/logs/hadoop-root-datanode-msi.out
    Starting secondary namenodes [localhost]
    localhost: starting secondarynamenode, logging to /opt/hadoop-2.6.5/logs/hadoop-root-secondarynamenode-msi.out
    starting yarn daemons
    starting resourcemanager, logging to /opt/hadoop-2.6.5/logs/yarn-root-resourcemanager-msi.out
    localhost: starting nodemanager, logging to /opt/hadoop-2.6.5/logs/yarn-root-nodemanager-msi.out
         
webgui

    查看8088和50070的页面



