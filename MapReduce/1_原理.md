
# MapReduce


阶段split map shuffle reduce 

	

	MR原语：map + reduce 


	输入(格式化k,v)数据集map映射成一个中间数据集(k,v)
	
	reduce (sql)  特征值 计算值
	“相同”的key为一组，调用一次reduce方法，方法内迭代这一组数据进行计算 (类似的sql)  并行执行

# 主线

map reduce

# 细节

split map shuffle reduce 

# split

	block split  逻辑分隔 避免block过大
	
	一个split对应一个map
	
	

# Map

	将数据制作为对应的映射
	
	并将映射写入缓冲区（缓冲区满了将溢出为文件）
		
	根据key分组
	map
	
# shuffle

缓冲区

排序

	排序分组 减少

	两次排序

	按reduce分区进行排序
	考虑一个reduce处理多个key的情况 内部在排序
压缩

	提前计算
	

文件归并排序

	缓冲区满了 生成了多个文件 统一发送

# Reduc

	获取到全部的key对应的

	同一组key 只能在一个 reduce处理
	一个reduce能处理多组key
	Reduce merge  


 
	
	
 	
