
  
# 文件存储

block

    在HDFS里，
    文件被切分成若干个block，
    通常每个数据块64MB~128MB，
    相同文件的block数据块不一定保存在相同的DataNode上。
    这样做的好处是，当对这些文件执行运算时，能够通过并行方式读取和处理文件的不同部分。
    block最终写入DataNode底层的文件系统。


线性切割  

    切割成块 块大小不变 
    偏移量 记录位置
    平均 处理能力差不多
    按字节 把字符集切断了 存储模型：字节
    

 
副本
  
    默认情况下每个block都有三个副本
    通过副本可以保证数据的高可用
  
  
  
  
  
  # 流程
  
 # 写流程
 
     客户端向NameNode请求存储数据
      （客户端切割文件）
     NameNode会返回用于存储的DataNode集合 并记录在文件分配表
     客户端向对应DataNode存储数据  
     DataNode保存数据后会自动请求其他DataNode保存数据副本
     所有副本保存完，会给客户端发送确认消息，数据才被认为写入完成
     
  
 # 读流程
 
    客户端向NameNode请求读取数据
    NameNode发送数据块的信息给客户端。
    (数据块信息包含了保存着文件副本的DataNode的IP地址，以及DataNode在本地硬盘查找数据块所需要的数据块ID。)
    客户端检查数据块信息，向相关的DataNode，请求数据块
    客户端并行从不同的DataNode中获取一个文件的数据块，然后联结这些数据块，拼成完整的文件

  
  
  
  
  

  
  








